<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.70cb49b54760d538901d.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language-]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;transform:rotate(-2deg)}pre[class*=language-]:after{right:.75em;left:auto;transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}</style><meta name="generator" content="Gatsby 2.23.12"/><title data-react-helmet="true">Couchbase is Cool</title><link as="script" rel="preload" href="/webpack-runtime-03e050967628cfa573f6.js"/><link as="script" rel="preload" href="/framework-eee85d6617561aeaf45d.js"/><link as="script" rel="preload" href="/styles-8d3db5124725dcff78a7.js"/><link as="script" rel="preload" href="/app-a100ff72d99090a7b959.js"/><link as="script" rel="preload" href="/component---gatsby-theme-mdx-deck-src-templates-deck-js-7cdece5c24e00dae5660.js"/><link as="fetch" rel="preload" href="/page-data/print/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="ut8w6s">body{margin:0;overflow:hidden;}</style><style data-emotion-css="bdfrlc">.css-bdfrlc{width:100vw;height:100vh;}.css-bdfrlc *{box-sizing:border-box;}</style><div class="css-bdfrlc"><div style="outline:none;height:100%" tabindex="-1"><style data-emotion-css="laz4dw">.css-laz4dw{box-sizing:border-box;width:100%;height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;position:relative;color:var(--theme-ui-colors-text,#1c0a14);background-color:var(--theme-ui-colors-background,#fffff2);font-family:"Overpass";font-size:20px;}@media screen and (min-width:40em){.css-laz4dw{font-size:24px;}}@media screen and (min-width:52em){.css-laz4dw{font-size:32px;}}@media screen and (min-width:64em){.css-laz4dw{font-size:48px;}}</style><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><style data-emotion-css="1djqpdg">.css-1djqpdg{font-family:inherit;line-height:1.125;font-weight:700;}</style><h1 class="css-1djqpdg">Couchbase is Cool</h1><h3 class="css-1djqpdg">A Brief introduction to Couchbase</h3></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">Agenda</h1><style data-emotion-css="1uk1gs8">.css-1uk1gs8{margin:0;}</style><ul class="css-1uk1gs8"><style data-emotion-css="u9oar3">.css-u9oar3 code{font-style:italic;}</style><li class="css-u9oar3">What is Couchbase?</li><li class="css-u9oar3">How does it work?</li><li class="css-u9oar3">N1QL</li><li class="css-u9oar3">Pros and Cons</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="text-align:center" class="css-0"><style data-emotion-css="wnzno2">.css-wnzno2{max-width:100%;height:auto;object-fit:cover;}</style><img src="https://cdn.iconscout.com/icon/free/png-256/couchbase-1-285194.png" class="css-wnzno2"/></div><br/><small>Couchbase is a distributed NoSQL document store offering high-availability, complete with ACID compliance, memory-first architecture, and a SQL(ish) language for querying.</small></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="display:flex;justify-content:space-between"><div style="text-align:left;width:75%"><div class="css-0"><h3 class="css-1djqpdg">NoSQL</h3><small><ul class="css-1uk1gs8"><li class="css-u9oar3">Documents instead of rows/columns</li><li class="css-u9oar3">Flexible schema</li><li class="css-u9oar3">Data locality </li></ul></small></div></div><div style="text-align:left;width:25%"><div class="css-0"><img src="https://cdn.iconscout.com/icon/free/png-256/couchbase-1-285194.png" class="css-wnzno2"/></div></div></div></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="display:flex;justify-content:space-between"><div style="text-align:left;width:75%"><div class="css-0"><h3 class="css-1djqpdg">Distributed</h3><small><ul class="css-1uk1gs8"><li class="css-u9oar3">Data spread across multiple nodes</li><li class="css-u9oar3">High availability</li><li class="css-u9oar3">Cross data center replication available</li></ul></small></div></div><div style="text-align:left;width:25%"><div class="css-0"><img src="https://cdn.iconscout.com/icon/free/png-256/couchbase-1-285194.png" class="css-wnzno2"/></div></div></div></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="display:flex;justify-content:space-between"><div style="text-align:left;width:75%"><div class="css-0"><h3 class="css-1djqpdg">ACID Compliant</h3><small><ul class="css-1uk1gs8"><li class="css-u9oar3">Distributed transactions</li><li class="css-u9oar3">Durable data </li></ul></small></div></div><div style="text-align:left;width:25%"><div class="css-0"><img src="https://cdn.iconscout.com/icon/free/png-256/couchbase-1-285194.png" class="css-wnzno2"/></div></div></div></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="display:flex;justify-content:space-between"><div style="text-align:left;width:75%"><div class="css-0"><h3 class="css-1djqpdg">SQL(ish)</h3><small><ul class="css-1uk1gs8"><li class="css-u9oar3">N1QL query language</li><li class="css-u9oar3">JSON-centric SQL</li><li class="css-u9oar3">Declarative and ad-hoc</li><li class="css-u9oar3">Supports </li></ul></small></div></div><div style="text-align:left;width:25%"><div class="css-0"><img src="https://cdn.iconscout.com/icon/free/png-256/couchbase-1-285194.png" class="css-wnzno2"/></div></div></div></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h3 class="css-1djqpdg">How Are Documents Stored/Retrieved?</h3><ul class="css-1uk1gs8"><li class="css-u9oar3">Documents get assigned a unique key</li><li class="css-u9oar3">Documents stored via key in buckets</li><li class="css-u9oar3">Buckets distributed across nodes in a cluster</li><li class="css-u9oar3">Client responsible for locating proper node based on key</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h3 class="css-1djqpdg">Sharding or Distribution</h3><ul class="css-1uk1gs8"><li class="css-u9oar3">Buckets split into vBuckets</li><li class="css-u9oar3">Each vBuckets has an active and replica</li><li class="css-u9oar3">An active and replica of the same vBucket cannot reside on the same node</li><li class="css-u9oar3">Hashing of the key used to determine which vBucket</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><div style="text-align:center" class="css-0"><img style="width:80%;border:1px solid black;border-radius:3px" src="https://res.cloudinary.com/dangoslen/image/upload/v1593715150/dangoslen.me/vbucketToNodeMapping_j7ygvk.png" class="css-wnzno2"/></div></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">Bucket Types</h1></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">Couchbase Bucket</h2><ul class="css-1uk1gs8"><li class="css-u9oar3">&quot;Standard&quot; bucket</li><li class="css-u9oar3">Full replication and data persistence</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">Ephemeral Bucket</h2><ul class="css-1uk1gs8"><li class="css-u9oar3">Memory-only</li><li class="css-u9oar3">Full replication available</li><li class="css-u9oar3">Think data-grid</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">Memcached Bucket</h2><ul class="css-1uk1gs8"><li class="css-u9oar3">Memory-only</li><li class="css-u9oar3">No replication available</li><li class="css-u9oar3">Think cache for another datastore</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">N1QL</h1><h2 class="css-1djqpdg"><em class="css-0">Declartive queries for JSON documents</em></h2></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">N1QL can ...</h2><ul class="css-1uk1gs8"><li class="css-u9oar3">Query arrays and items in an array</li><li class="css-u9oar3">Query sub-documents</li><li class="css-u9oar3">Join documents</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">JSON Schema</h2><style data-emotion-css="rrhrjh">.css-rrhrjh{font-family:"Source+Code+Pro";padding:16px;}</style><pre class="css-rrhrjh"><style data-emotion-css="wajs6d">.css-wajs6d{font-family:"Source+Code+Pro";}</style><code class="language-data-json css-wajs6d">{
    name: “name”,
    ingredients: [
        { 
            name: “name”,
            ...
        }
    ],
    ...
}
</code></pre></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h2 class="css-1djqpdg">Example Queries</h2><pre class="css-rrhrjh"><code class="language-language-sql css-wajs6d">// Select the first ingredient
SELECT ingredients[0] FROM recipes;

// Count the ingredients in each recipe
SELECT ARRAY_LENGTH(ingredients) FROM recipes;

// Find recipes with basil 
SELECT recipe FROM recipes
WHERE ANY ingredient IN ingredients 
  SATISFIES ingredient.name = ‘basil’
</code></pre></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">Pros</h1><ul class="css-1uk1gs8"><li class="css-u9oar3">Couchbase is very flexible</li><li class="css-u9oar3">Great SDK (my personal experience)</li><li class="css-u9oar3">Great docs </li><li class="css-u9oar3">Available as a docker container - easy to download and run</li><li class="css-u9oar3">Administration is done via web user interface</li><li class="css-u9oar3">Documents are compressed for storage efficiency </li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">Cons</h1><ul class="css-1uk1gs8"><li class="css-u9oar3">N1QL is generally slower than traditional SQL </li><li class="css-u9oar3">Proper indexing!</li><li class="css-u9oar3">No good “migration management” tool for creating buckets or indexes</li><li class="css-u9oar3">Limit on the size of a document is 20 Mb</li><li class="css-u9oar3">30 bucket limit per cluster</li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><div style="width:75vw;height:80vh"><div><h1 class="css-1djqpdg">References</h1><ul class="css-1uk1gs8"><li class="css-u9oar3"><style data-emotion-css="davq6y">.css-davq6y{color:#f1935c;}</style><a href="https://docs.couchbase.com/server/current/learn/architecture-overview.html" class="css-davq6y">Starting Point of Docs</a></li><li class="css-u9oar3"><a href="https://query-tutorial.couchbase.com/tutorial/#1" class="css-davq6y">N1QL Tutorial</a></li><li class="css-u9oar3"><a href="https://docs.couchbase.com/server/current/n1ql/query.html" class="css-davq6y">More on N1QL</a></li><li class="css-u9oar3"><a href="https://docs.couchbase.com/java-sdk/3.0/hello-world/start-using-sdk.html" class="css-davq6y">SDK Tutorial</a></li><li class="css-u9oar3"><a href="https://docs.couchbase.com/server/6.5/install/getting-started-docker.html" class="css-davq6y">Couchbase Docker Image</a></li></ul></div><div style="position:fixed;bottom:0px;left:0px;padding:10px;display:flex;width:100%;flex-flow:row wrap;justify-content:space-between;font-size:.6em;opacity:.6"><div><span>(<!-- -->0<!-- -->)</span></div><div><span>Dan Goslen</span></div></div></div></div><div class="css-laz4dw"><h1 class="css-1djqpdg">Thanks! 👋</h1></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/print";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a100ff72d99090a7b959.js"],"component---gatsby-theme-mdx-deck-src-templates-deck-js":["/component---gatsby-theme-mdx-deck-src-templates-deck-js-7cdece5c24e00dae5660.js"]};/*]]>*/</script><script src="/component---gatsby-theme-mdx-deck-src-templates-deck-js-7cdece5c24e00dae5660.js" async=""></script><script src="/app-a100ff72d99090a7b959.js" async=""></script><script src="/styles-8d3db5124725dcff78a7.js" async=""></script><script src="/framework-eee85d6617561aeaf45d.js" async=""></script><script src="/webpack-runtime-03e050967628cfa573f6.js" async=""></script></body></html>